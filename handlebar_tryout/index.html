<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>View Editing</title>
    <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/redmond/jquery-ui-1.8.16.custom.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/redmond/jquery.ui.theme.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../thirdparty/treeview/jquery.treeview.css" type="text/css"/>
    <link rel="stylesheet" href="../thirdparty/smartwizard/styles/smart_wizard_vertical.css" type="text/css">
    <link rel="stylesheet" href="../css/filter_builder.css" type="text/css"/>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.js" type="text/javascript"></script>
    <script src="http://documentcloud.github.com/underscore/underscore.js" type="text/javascript"></script>
    <script src="http://documentcloud.github.com/backbone/backbone.js" type="text/javascript"></script>
    <script src="../thirdparty/handlebars.js" type="text/javascript"></script>
    <script src="../thirdparty/treeview/jquery.treeview.js" type="text/javascript"></script>
    <script src="../scripts/base.js" type="text/javascript"></script>
    <script src="../scripts/filter_builder.js" type="text/javascript"></script>
    <script src="../scripts/tiny_button.js" type="text/javascript"></script>
    <script src="../thirdparty/smartwizard/jquery.smartWizard-2.0.js" type="text/javascript" ></script>
    <script src="index.js" type="text/javascript"></script>
    <script src="models.js" type="text/javascript"></script>

</head>

<body>

<div class="view_edit">

<div class="view_edit section base_info">
</div>

<div class="swMain">
    <ul>
        <li><a href="#step-1">
        <span class="stepDesc">
           Types<br /><br />
           <small>Choose Types from the Hierarchy Treeview</small>
        </span>
    </a></li>
        <li><a href="#step-2">
        <span class="stepDesc">
           Groupings<br /><br />
           <small>Choose Groupings</small>
        </span>
    </a></li>
        <li><a href="#step-3">
        <span class="stepDesc">
           Attributes<br /><br />
           <small>Choose Display Attributes and Sortings</small>
        </span>                   
     </a></li>
    </ul>

<div id="step-1">   
    <h2 class="StepTitle">Types</h2>
    <div class="view_edit section pivot_type"></div>
    <br />
</div>

<div id="step-2">
    <div class="view_edit section group_by_attributes">
        <span class="ui-icon ui-icon-plus group_by_attributes" style="position:absolute; margin-top: 6px; margin-left: 105px; cursor:pointer; z-index:100;"></span>
        <h2 class="StepTitle">Groupings:</h2> 
        <div>
            <ul class="sortable_groupby"></ul>
        </div>
        <div>
            Enable Grouping Icons: <input type="checkbox" name="grouping_icon" class="view_input" ><br />
        </div>
    </div>
    <div class="clear"></div>
    <div class="view_edit section aggregate_attributes">
        <span class="ui-icon ui-icon-plus aggregate_attributes" style="position:absolute; margin-top: 6px; margin-left: 116px; cursor:pointer; z-index:100;"></span>
        <h2 class="StepTitle">Aggregates:</h2>
        <div>
            <ul class="sortable_aggregate"></ul>
        </div>
    </div>
</div>                      

<div id="step-3">
    <div class="view_edit section display_attributes">
        <span class="ui-icon ui-icon-plus display_attributes" style="position:absolute; margin-top: 6px; margin-left: 168px; cursor:pointer; z-index:100;"></span>
        <h2 class="StepTitle">Display Attributes:</h2>
        <div>
            <ul class="sortable_display"></ul>
        </div>
        <br/><br/>
    </div>
    <div class="clear"></div>
    <div class="view_edit section sort_attributes">
        <span class="ui-icon ui-icon-plus sort_attributes" style="position:absolute; margin-top: 6px; margin-left: 85px; cursor:pointer; z-index:100;"></span>
        <h2 class="StepTitle">Sortings:</h2> 
        <div>
            <ul class="sortable_sort"></ul>
        </div>
    </div>
</div>

</div>

</div>
<!---------------------------------------- Templates ------------------------------------------------>

<!-- Templates -->    
<script type="text/template" id="base-info-template">
    <button class="force_reload"><span class="ui-icon ui-icon-refresh" style="float:left; cursor:pointer" ></span> &nbsp;Clear Cache and Reload</button>
    <h3>View Name: &nbsp;&nbsp;&nbsp; <input type="text" name="view_name" class="view_input" value="{{name}}" /></h3>
    <div class="view_description">Description: </div>
    <div class="view_description_details">
    <textarea name="view_description" class="view_input" >{{description}}
    </textarea><br />
    </div>
    <br /><br />
</script>
<!-- Templates --> 
<script type="text/template" id="pivot-type-template">
    {{#child_entity_type}}
    <div class="pivot_type_filter">
    <select class="pivot_entity_type" >
        <option selected="selected" data-entyname="{{entity_type_name}}" data-entyid="{{entity_type_id}}" > {{entity_type_name}} </option>
    </select>
    <span class="allowFilters"></span>    
    </div>
    {{/child_entity_type}}

</script>
<!-- Partial Templates -->
<script type="text/template" id="entity-type-partial-template">
    <ul>
    {{#related_entity_types}}
            <li><input type="checkbox" style="position:absolute;" id="{{entity_type_id}}" data-entyname="{{entity_type_name}}" data-entyid="{{entity_type_id}}" /><span class="space">{{entity_type_name}}</span>
            {{>related_partial}}
            </li>
    {{/related_entity_types}}
    {{^related_entity_types}}
            <li><span class="placeholder">&nbsp;</span></li>
    {{/related_entity_types}}
    </ul>
</script>
<!-- Partial Templates 
<script type="text/template" id="pivot-type-partial-template">
    {{#children}}
        <ul>
            {{#child_entity_type}}
            <li>{{entity_type_name}}</li>
            {{/child_entity_type}}
            {{>test_partial}}
        </ul>
    {{/children}}
</script> -->
<!-- Templates --> 
<script type="text/template" id="groupby-attribute-template">
    {{#attribute}}
    <li class="ui-state-default sortable_groupby" value="{{attribute_id}}">
        <span class="ui-icon ui-icon-close front" ></span>
        {{entity_type_name}}.{{attribute_name}}
    </li> 
    {{/attribute}}
</script>
<!-- Templates --> 
<script type="text/template" id="aggregate-attribute-template">
    <li class="ui-widget-header sortable_aggregate" >
        <span class="ui-icon ui-icon-close front" ></span>
        {{aggregate_function}}
        {{#attribute}}([{{entity_type_name}}].[{{attribute_name}}]){{/attribute}}
        <span class="ui-icon ui-icon-pencil end"></span>
        {{#apply_sort}}        
        {{{sort_direction_icon}}}
        {{/apply_sort}}
    </li> 
</script>
<!-- Templates --> 
<script type="text/template" id="display-attribute-template">
    {{#attribute}}
    <li class="ui-widget-header sortable_display" value="{{display_name}}">
        <span class="ui-icon ui-icon-close" ></span>
        {{entity_type_name}}.{{attribute_name}}
    </li> 
    {{/attribute}}
</script>
<!-- Templates -->    
<script type="text/template" id="sort-attribute-template">
    <li class="ui-state-default sortable_sort" value="{{attribute_id}}">
    {{#attribute}}
        <span class="ui-icon ui-icon-close front" ></span>
        {{entity_type_name}}.{{attribute_name}}
    {{/attribute}}
    {{{sort_direction_icon}}}
    </li> 
</script>
<!-- Templates -->  
<script type="text/template" id="entitytype-attribute-template">
    <li><span class="space">{{entity_type_name}}</span>
        <ul>
        {{#attribute_defs}}
            <li><input type="checkbox" style="position:absolute;" id="{{attribute_id}}" data-entyname="{{entity_type_name}}" data-entyid="{{entity_type_id}}" data-attrname="{{attribute_name}}" data-attrid="{{attribute_id}}"/><span class="space">{{entity_type_name}}.{{attribute_name}}</span></li>
        {{/attribute_defs}}
        </ul>
    </li>
</script>
<!-- Templates -->  
<script type="text/template" id="filter-dialog-template">
    <div id='FilterEditor' class ='FilterEditor' style='display:none' >
    <div class='RuleSummary'>
    </div>
    <div class='FilterGroup scrollable'>
        <ul class='filter_node_element start_node'></ul> 
    </div> 
    <div class='SingleFilter' style='height:40px;display:none;padding-top:3px;padding-bottom:3px;'> 
        <span style='padding-right:52px;'><label style='padding-left: 5px;'>Entity Type</label></span> 
        <span style='padding-right:52px;'><label style='padding-left: 7px;'>Attribute</label></span> 
        <span style='padding-right:52px; padding-left: 18px;'><label>Operator</label></span> 
        <br/> 
        <span class='textLabel'><select class='EntityTypeSelection dropdown' ></select></span> 
        <span class='textLabel'><select class='FilterAttributeSelection dropdown' ></select></span> 
        <span class='textLabel'><select class='OperatorSelection dropdown' ></select></span> 
        <span class='textLabel'><input class='LValue' type='text' name='LValue' /></span> 
        <span class='textLabel'><label  class='lblAnd'>AND</label></span> 
        <span class='textLabel'><input  class='RValue' type='text' name='RValue' /></span> 
        <span class='create_group ui-icon ui-icon ui-icon-plusthick' title='Add Group'></span> 
    </div> 
    <div class='AddGroup' style='padding-top: 20px; padding-left: 5px; padding-bottom:5px;display: none;'> 
    <button class='btnAddGroup' title='Add Filter Group' onclick='LoadGroupFilterEditor();' style='padding-left: 5px;'>Add Filter Group</button>
    </div>
    <div class='add_first_filter simple_text' style='display: none;'><label class="pointer">No filters defined! Click here to add a filter.</label></div>
    </div>
</script>


<!--------------------  filter Templates  ------------------------------------

<script type="text/template" id="t_entity_attribute_div">
    <div class="entity_type_and_attribute">
        <div class="text">
            <div class="attribute" style="font-size:1.1em; font-weight:bold;"></div>
            <div class="entity_type" style="font-size:0.8em; color:#777;"></div>
        </div>
        <div class="arrow">
            <span class="ui-icon ui-icon-triangle-1-s"></span>
        </div>
        <div style="clear:both;"></div>
    </div>
</script>

<script type="text/template" id="t_target_selection_panel_div">
    <div class="target_selection_panel"></div>
</script>

<script type="text/template" id="t_button_group_div">
    <div class="buttons"></div>
</script>

<script type="text/template" id="t_entity_type_selector_div">
    <select class="entity_type"></select>
</script>

<script type="text/template" id="t_attribute_selector_div">
    <select class="attribute"></select>
</script>

<script type="text/template" id="t_ok_button_html">
    <button class="ok">Ok</button>
</script>

<script type="text/template" id="t_cancel_button_html">
    <button class="cancel">Cancel</button>
</script>

<script type="text/template" id="t_group_html">
    <ul class="filter_group"></ul>
</script>

<script type="text/template" id="t_group_control_row_html">
    <li class="operator">
        <select>
            <option value="AND">All</option>
            <option value="OR">Any</option>
        </select> of the following are true
        <div class="row_control_buttons">
            <a class="trash_button" title="Delete"></a>
            <div style="clear:both;"></div>
        </div>
        <div style="clear:both;"></div>
    </li>
</script>

<script type="text/template" id="t_filters_row_html">
    <li class="filters">
        <ul class="filter_list"></ul>
    </li>
</script>

<script type="text/template" id="t_subgroups_row_html">
    <li class="subgroups"></li>
</script>

<script type="text/template" id="t_add_group_items_row_html">
    <li class="add_group_items">
        <table>
            <tr>
                <td>
                    <div class="new_group_item_clickable new_filter_clickable">
                        <span class="ui-icon ui-icon-plus" style="float:left;"></span>
                        <div class="text">New Filter</div><div style="clear:both;"></div>
                    </div>
                </td>
                <td>
                    <div class="new_group_item_clickable new_subgroup_clickable">
                        <span class="ui-icon ui-icon-plus" style="float:left;"></span>
                        <div class="text">New Subgroup</div><div style="clear:both;"></div>
                    </div>
                </td>
            </tr>
        </table>
    </li>
</script>

<script type="text/template" id="t_filter_html">
    <li class="filter">
        <div class="description">
            <table>
                <tbody>
                    <tr>
                        <td>
                            <div class="entity_type_and_attribute">
                                <div class="text">
                                    <div class="attribute" style="font-size:1.1em; font-weight:bold;"></div>
                                    <div class="entity_type" style="font-size:0.8em; color:#777;"></div>
                                </div>
                                <div class="arrow">
                                    <span class="ui-icon ui-icon-triangle-1-s"></span>
                                </div>
                                <div style="clear:both;"></div>
                            </div>
                        </td>
                        <td class="filter_type">is&nbsp;&nbsp;&nbsp;
                            <select></select>
                        </td>
                        <td class="parameters"></td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="row_control_buttons">
            <a class="trash_button" title="Delete"></a>
            <a class="add_filter_button" title="Add Filter"></a>
            <div style="clear:both;"></div>
        </div>
        <div style="clear:both;"></div>
    </li>
</script>

<script type="text/template" id="t_format_control_html">
    <div class="separator"></div>
    <div class="conditional_format_section_header">
        <label class="header_label">Formatting</label>
    </div>
    <div class="formatting_control">
        <table class="description">
            <tbody>
                <tr>
                    <td>
                        <span class="format_row">
                            <div class="entity_type_and_attribute">
                                <div class="text">
                                    <div class="attribute" style="font-size:1.1em; font-weight:bold;"></div>
                                    <div class="entity_type" style="font-size:0.8em; color:#777;"></div>
                                </div>
                                <div class="arrow">
                                    <span class="ui-icon ui-icon-triangle-1-s"></span>
                                </div>
                                <div style="clear:both;"></div>
                            </div>
                        </span>
                    </td>
                    <td>
                        <span class="textLabel"><label>Background Color</label></span>
                        <span class="inputElement"><input id="backColor" class="color backColor" /></span>
                        <span class="textLabel"><label>Text Color</label></span>
                        <span class="inputElement"><input id="foreColor" class="color foreColor" name="ForeColor" /></span>
                        <span class="textLabel"><label>Bold</label></span>
                        <span class="inputElement"><input class="Bold" type="checkbox" name="Bold" /></span>
                        <span class="textLabel"><label>Italic</label></span>
                        <span class="inputElement"><input class="Italic" type="checkbox" name="Italic" /></span>
                        <span class="inputElement"><input style="width:120px; height:24px" id="sampleText" class="color sampleText" value="Sample Text" /></span>
                        <div style="clear:both;"></div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</script>

<script type="text/template" id="t_filter_header_html">
    <br/><div class="separator"></div><div class="conditional_format_section_header"><label class="header_label">Filter</label></div>
</script>
-->

</body>
</html>